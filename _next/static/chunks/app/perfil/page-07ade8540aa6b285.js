(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{5855:function(e,l,t){Promise.resolve().then(t.bind(t,2807))},2807:function(e,l,t){"use strict";t.d(l,{PerfilPageClient:function(){return n}});var i=t(7437),o=t(2265),r=t(3595);function a(){let{profile:e,activeProfileId:l,updateProfile:t}=(0,r.U)(),a=(0,o.useRef)(null),[n,s]=(0,o.useState)((null==e?void 0:e.name)||""),[c,u]=(0,o.useState)(!1);return(0,i.jsxs)("div",{className:"max-w-sm mx-auto p-4 space-y-4",children:[(0,i.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Editar Perfil"}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("img",{src:(null==e?void 0:e.photo)||"/default-avatar.png",alt:"Foto do perfil",className:"w-24 h-24 rounded-full object-cover border",onClick:function(){var e;null===(e=a.current)||void 0===e||e.click()},style:{cursor:"pointer"}}),(0,i.jsx)("input",{type:"file",accept:"image/*",ref:a,style:{display:"none"},onChange:function(e){var i;let o=null===(i=e.target.files)||void 0===i?void 0:i[0];if(o&&l){let e=new FileReader;e.onload=()=>{t(l,{photo:e.result}),u(!0),setTimeout(()=>{window.location.reload()},300)},e.readAsDataURL(o)}}})]}),(0,i.jsx)("input",{type:"text",className:"border rounded px-3 py-2 w-full",placeholder:"Seu nome",value:n,onChange:function(e){s(e.target.value)}}),(n!==((null==e?void 0:e.name)||"")||c)&&(0,i.jsx)("button",{type:"button",className:"mt-4 px-6 py-2 rounded bg-primary text-white font-semibold shadow hover:bg-primary/90 transition",onClick:function(){l&&(t(l,{name:n}),setTimeout(()=>{window.location.reload()},300))},children:"Salvar"})]})]})}function n(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-[40vh] flex items-center justify-center",children:"Carregando perfil..."}),children:(0,i.jsxs)("div",{className:"max-w-lg mx-auto py-10",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Meu Perfil"}),(0,i.jsx)(a,{})]})})}},3595:function(e,l,t){"use strict";t.d(l,{U:function(){return a}});var i=t(2265);let o="pcursos:profiles",r="pcursos:activeProfileId";function a(){let[e,l]=(0,i.useState)({profiles:[],activeProfileId:null}),[t,a]=(0,i.useState)(!1),n=e.profiles.find(l=>l.id===e.activeProfileId)||null,s=e.profiles.length>0;(0,i.useEffect)(()=>{var e,t;let i=localStorage.getItem(o),n=localStorage.getItem(r),s=[];if(i)try{s=JSON.parse(i)}catch(e){s=[]}l({profiles:s,activeProfileId:n||(null!==(t=null===(e=s[0])||void 0===e?void 0:e.id)&&void 0!==t?t:null)}),a(!0)},[]);let c=(0,i.useCallback)((e,t)=>{l({profiles:e,activeProfileId:t});try{localStorage.setItem(o,JSON.stringify(e)),t?localStorage.setItem(r,t):localStorage.removeItem(r)}catch(e){}},[]),u=(0,i.useCallback)((l,t)=>{if(e.profiles.length>=5)return null;let i={id:"profile_".concat(Date.now()),name:l,photo:t};return c([...e.profiles,i],i.id),i},[e.profiles,c]),d=(0,i.useCallback)((l,t)=>{c(e.profiles.map(e=>e.id===l?{...e,...t}:e),e.activeProfileId)},[e.profiles,e.activeProfileId,c]),f=(0,i.useCallback)(l=>{var t,i;let o=e.profiles.filter(e=>e.id!==l),r=e.activeProfileId===l?null!==(i=null===(t=o[0])||void 0===t?void 0:t.id)&&void 0!==i?i:null:e.activeProfileId;c(o,r)},[e.profiles,e.activeProfileId,c]),p=(0,i.useCallback)(l=>{e.profiles.some(e=>e.id===l)&&c(e.profiles,l)},[e.profiles,c]);return{profile:n,profiles:e.profiles,activeProfileId:e.activeProfileId,hasProfiles:s,isLoaded:t,createProfile:u,updateProfile:d,deleteProfile:f,switchProfile:p,canAddMore:e.profiles.length<5}}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5855)}),_N_E=e.O()}]);